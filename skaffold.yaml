apiVersion: skaffold/v4beta1
kind: Config
metadata:
  name: sample-golang
build:
  cluster:
    namespace: tekton-pipelines
    dockerConfig:
      secretName: registry-docker-config
    serviceAccount: kaniko-builder
  artifacts:
  - image: registry-harbor-registry.registry:5000/sample-golang
    kaniko:
      buildContext:
        localDir: {}
      dockerfile: ./Dockerfile
      cache: {}
      insecure: true
      insecurePull: true
      #cleanup: true
      args:
      - --skip-tls-verify
      - --skip-tls-verify-pull


deploy:
  docker:
    images:
    - registry-harbor-registry.registry:5000/sample-golang

manifests:
  rawYaml:
  - k8s/**
